<!--
Composant personnalisÃ© <app-searchbar>
Ce composant permet Ã  lâ€™utilisateur de taper du texte dans un champ de recherche.
Il Ã©met un Ã©vÃ©nement "searchChange" dÃ¨s que lâ€™utilisateur Ã©crit quelque chose.
(onSearchChange($event)) â†’ on appelle la mÃ©thode "onSearchChange" dans le fichier .ts en lui passant le mot recherchÃ©.
-->
<!-- âœ… Conteneur horizontal pour la barre de recherche et les filtres -->
<div class="search-filter-row">

  <!-- ðŸ” Barre de recherche (composant personnalisÃ©) -->
  <app-searchbar (searchChange)="onSearchChange($event)"></app-searchbar>

  <!-- ðŸ§ª Section filtres : types et tri -->
  <div class="filter-section">
    
    <!-- ðŸŽ¯ Filtre par type (liste dÃ©roulante multi-sÃ©lection) -->
    <label for="typeSelect">Filtrer par type :</label><br />
    <select 
      id="typeSelect"
      multiple
      (change)="onMultiTypeChange($event)"
      class="type-select"
    >
      <!-- âœ… Syntaxe Angular 18+ : boucle @for -->
      @for (type of types; track type) {
        <!-- Chaque option reprÃ©sente un type de PokÃ©mon -->
        <option [value]="type">{{ type | titlecase }}</option>
      }
    </select>

    <!-- ðŸ” Bouton pour rÃ©initialiser les filtres sÃ©lectionnÃ©s -->
    <button class="reset-filters-btn" (click)="resetFilters()">RÃ©initialiser les filtres</button>

    <!-- â¬†ï¸â¬‡ï¸ Menu dÃ©roulant pour trier la liste -->
    <label for="sortSelect">Trier par :</label><br />
    <select id="sortSelect" (change)="onSortChange($event)" class="sort-select">
      <option value="name-asc">Nom A â†’ Z</option>
      <option value="name-desc">Nom Z â†’ A</option>
      <option value="id-asc">ID croissant</option>
      <option value="id-desc">ID dÃ©croissant</option>
    </select>

  </div>
</div>

<!-- ðŸ“¦ Conteneur des cartes de PokÃ©mon -->
<div class="cards-container">

  <!--
  ðŸ” Affichage dynamique des PokÃ©mons via boucle @for (Angular 18+)
  track pokemon.name : clÃ© unique pour optimiser le rendu Angular
  -->
  @for (pokemon of filteredPokemons(); track pokemon.name) {

    <!--
    ðŸ“‡ Affichage d'une carte PokÃ©mon via le composant <app-cards>
    Props (inputs) passÃ©es :
    - [name] â†’ nom du PokÃ©mon
    - [url] â†’ URL de dÃ©tails de lâ€™API
    - [id] â†’ ID du PokÃ©mon (extrait dans le service)
    -->
    <app-cards
      [name]="pokemon.name"
      [url]="pokemon.url"
      [id]="pokemon.id" />
  }
</div>
